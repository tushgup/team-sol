<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Team Sol Explorers x NASA Prototype</title>

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="./apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="./favicon-16x16.png"
    />
    <link rel="manifest" href="./site.webmanifest" />
    <meta name="msapplication-TileColor" content="#2b5797" />
    <meta name="theme-color" content="#262626" />

    <!-- Bootstrap core CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
    />

    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
      integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
      crossorigin=""
    />
    <link rel="stylesheet" href="css/MarkerCluster.css" />
    <link rel="stylesheet" href="css/MarkerCluster.Default.css" />
    <link rel="stylesheet" href="css/Leaflet.GraphicScale.min.css" />
    <link rel="stylesheet" href="css/popupMod.css" />
    <link rel="stylesheet" href="css/easytimer.min.css" />
    <link rel="stylesheet" href="css/draw-on-map.css" />
    <link rel="stylesheet" href="css/L.Control.MousePosition.css" />
    <link rel="stylesheet" href="css/leaflet.contextmenu.min.css" />
    <link rel="stylesheet" href="css/L.Icon.Pulse.css" />
    <link rel="stylesheet" href="css/L.Icon.FontAwesome.css" />

    <script src="https://unpkg.com/phosphor-icons"></script>

    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <!-- Make sure you put this AFTER Leaflet's CSS -->

    <!-- Custom styles for this template -->
    <link href="css/main.css" rel="stylesheet" />
  </head>

  <body>
    <div class="Nav">
      <nav class="navbar navbar-dark" style="background-color: #262626">
        <div class="container-fluid p-2">
          <div
            class="navbar-brand"
            style="display: flex; flex-direction: row; align-items: center"
          >
            <img
              class="mx-2"
              src="assets/icons/team-sol-logo.svg"
              height="18"
              width="18"
            />
            <p class="my-0 mx-1">SOL 125</p>
          </div>
          <p class="my-0">
            Tuesday, July 20 2021
            <span class="mx-1" id="navBarTimer">09:00:00</span>
          </p>
          <p class="my-0 mx-4">EVA #3231</p>
        </div>
      </nav>
    </div>

    <div class="container-fluid row mx-0 px-0">
      <div class="col-9 mapContainer px-0">
        <div id="mapid"></div>
      </div>
      <div class="col-3 px-0 sidebarContent">
        <div class="nestedTabs">
          <nav>
            <div class="nav narbar-dark nav-tabs" id="nav-tab" role="tablist">
              <button
                class="nav-link active"
                id="nav-home-tab"
                data-bs-toggle="tab"
                data-bs-target="#nav-home"
                type="button"
                role="tab"
                aria-controls="nav-home"
                aria-selected="true"
              >
                <span class="nestedTabTextStyle">
                  <i class="ph-book-open mx-2"></i>
                  Procedure
                </span>
              </button>
              <button
                class="nav-link"
                id="nav-profile-tab"
                data-bs-toggle="tab"
                data-bs-target="#nav-profile"
                type="button"
                role="tab"
                aria-controls="nav-profile"
                aria-selected="false"
              >
                <span class="nestedTabTextStyle">
                  <i class="ph-wrench mx-2"></i>
                  Tools
                </span>
              </button>
              <button
                class="nav-link"
                id="nav-contact-tab"
                data-bs-toggle="tab"
                data-bs-target="#nav-contact"
                type="button"
                role="tab"
                aria-controls="nav-contact"
                aria-selected="false"
              >
                <span class="nestedTabTextStyle">
                  <i class="ph-map-pin-line mx-2"></i> Zones
                </span>
              </button>
            </div>
          </nav>
          <div class="tab-content" id="nav-tabContent">
            <div
              class="tab-pane fade show active"
              id="nav-home"
              role="tabpanel"
              aria-labelledby="nav-home-tab"
            >
              <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingOne">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#flush-collapseOne"
                      aria-expanded="false"
                      aria-controls="flush-collapseOne"
                    >
                      <div class="accordionLabel">
                        <div>
                          <h5>Task 1</h5>
                          <p
                            style="text-transform: uppercase; color: gray"
                            class="my-0"
                          >
                            Zone A
                          </p>
                          <div id="task1Timer" class="timerHeader">
                            <p class="my-0">
                              PET Timer:
                              <span class="task1TimerValues">00:00:00</span>
                            </p>
                          </div>
                        </div>
                        <span class="nestedTabTextStyle mx-2">
                          <i class="ph-timer mx-2"></i> 30 min
                        </span>
                      </div>
                    </button>
                  </h2>
                  <div
                    id="flush-collapseOne"
                    class="accordion-collapse collapse"
                    aria-labelledby="flush-headingOne"
                    data-bs-parent="#accordionFlushExample"
                  >
                    <div
                      class="accordion-body"
                      id="sortable"
                      data-sortable-id="0"
                      aria-dropeffect="move"
                    >
                      <div class="timerButtonContainer">
                        <button
                          type="button"
                          class="btn btn-light startTask1Button"
                        >
                          Start
                        </button>
                        <button
                          type="button"
                          class="btn btn-success stopTask1Button"
                        >
                          End
                        </button>
                      </div>
                      <ul class="procedure-step-list">
                        <li
                          class="my-2"
                          data-id="1"
                          data-item-sortable-id="1"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep">
                            1.1. Confirm site location upon arrival.
                          </span>
                        </li>
                        <li
                          class="my-2"
                          data-id="2"
                          data-item-sortable-id="2"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" name="triggerSite1" />
                          <span class="editableStep">
                            1.2. Collect soil auger, 3 sample bags, soil probe,
                            soil core sampler, and 3 sampler syringes from the
                            tool kit.
                          </span>
                        </li>
                        <li
                          class="my-2"
                          data-id="3"
                          data-item-sortable-id="3"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep"> 1.3. Sample Site 1 </span>
                          <ul class="sub-task-list">
                            <li class="my-2">
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.3.1. Travel to sample site 1.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.3.2. Use the soil auger to collect surface
                                soil and transfer into the sample bag.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.3.3. Stow sample bag.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.3.4. Use the soil probe to remove 6 inches of
                                soil.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.3.5. Load a sampler syringe into the soil core
                                sampler.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.3.6. Use the soil core sampler to collect the
                                sample from the probed hole.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" name="triggerSite2" />
                              <span class="editableStep">
                                1.3.7. Remove syringe from sampler and stow.
                              </span>
                            </li>
                          </ul>
                        </li>
                        <li
                          class="my-2"
                          data-id="3"
                          data-item-sortable-id="3"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep"> 1.4. Sample Site 2 </span>
                          <ul class="sub-task-list">
                            <li class="my-2">
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.4.1. Travel to sample site 2.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.4.2. Use the soil auger to collect surface
                                soil and transfer into the sample bag.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.4.3. Stow sample bag.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.4.4. Use the soil probe to remove 12 inches of
                                soil.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.4.5. Load a sampler syringe into the soil core
                                sampler.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.4.6. Use the soil core sampler to collect the
                                sample from the probed hole.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" name="triggerSite3" />
                              <span class="editableStep">
                                1.4.7. Remove syringe from sampler and stow.
                              </span>
                            </li>
                          </ul>
                        </li>
                        <li
                          class="my-2"
                          data-id="4"
                          data-item-sortable-id="4"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep"> 1.5. Sample Site 3 </span>
                          <ul class="sub-task-list">
                            <li class="my-2">
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.1. Travel to sample site 3.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.2. Use the soil auger to collect surface
                                soil and transfer into the sample bag.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.3. Collect 3 basalt rocks approximately 2
                                inches in diameter and transfer into the sample
                                bag.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.4. Stow sample bag.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.5. Use the soil probe to remove 24 inches of
                                soil.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.6. Load a sampler syringe into the soil core
                                sampler.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.7. Use the soil core sampler to collect the
                                sample from the probed hole.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                1.5.8. Remove syringe from sampler and stow.
                              </span>
                            </li>
                          </ul>
                        </li>
                        <li
                          class="my-2"
                          data-id="5"
                          data-item-sortable-id="5"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep">
                            1.6. Return soil auger, soil probe, and soil core
                            sampler to the tool kit.
                          </span>
                        </li>
                        <li
                          class="my-2"
                          data-id="6"
                          data-item-sortable-id="6"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" name="task2Arrival" />
                          <span class="editableStep">
                            1.7. Place 3 sample bags and 3 sampler syringes into
                            the collection box.
                          </span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingTwo">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#flush-collapseTwo"
                      aria-expanded="false"
                      aria-controls="flush-collapseTwo"
                    >
                      <div class="accordionLabel">
                        <div>
                          <h5>Task 2</h5>
                          <p
                            style="text-transform: uppercase; color: gray"
                            class="my-0"
                          >
                            Zone B
                          </p>
                          <div id="task2Timer" class="timerHeader">
                            <p class="my-0">
                              PET Timer:
                              <span class="task2TimerValues">00:00:00</span>
                            </p>
                          </div>
                        </div>
                        <span class="nestedTabTextStyle mx-2">
                          <i class="ph-timer mx-2"></i> 90 min
                        </span>
                      </div>
                    </button>
                  </h2>
                  <div
                    id="flush-collapseTwo"
                    class="accordion-collapse collapse"
                    aria-labelledby="flush-headingTwo"
                    data-bs-parent="#accordionFlushExample"
                  >
                    <div class="accordion-body">
                      <div class="timerButtonContainer">
                        <button
                          type="button"
                          class="btn btn-light startTask2Button"
                        >
                          Start
                        </button>
                        <button
                          type="button"
                          class="btn btn-success stopTask2Button"
                        >
                          End
                        </button>
                      </div>
                      <ul class="procedure-step-list" id="task2List">
                        <li
                          class="my-2"
                          data-id="1"
                          data-item-sortable-id="1"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep">
                            2.1. Confirm zone location upon arrival.
                          </span>
                        </li>
                        <li
                          class="my-2"
                          data-id="2"
                          data-item-sortable-id="2"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" name="task2Site1" />
                          <span class="editableStep">
                            2.2. Collect camera A2 (macro), camera A3 (wide),
                            and camera A6 (pan) from the tool kit.
                          </span>
                        </li>
                        <li
                          class="my-2"
                          data-id="3"
                          data-item-sortable-id="3"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep"> 2.3. Photo Site 1 </span>
                          <ul class="sub-task-list">
                            <li class="my-2">
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.3.1. Travel to photo site 1.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.3.2. Use camera A2 (macro) to photograph the
                                ground from 3 feet above the surface.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.3.3. Use camera A3 (wide) to photograph the
                                horizon 2 feet above the surface and directly
                                North.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" name="task2Site2" />
                              <span class="editableStep">
                                2.3.4. Use camera A6 (pan) to photograph 360
                                degrees, 4 feet above the surface.
                              </span>
                            </li>
                          </ul>
                        </li>
                        <li
                          class="my-2"
                          data-id="3"
                          data-item-sortable-id="3"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep"> 2.4. Photo Site 2 </span>
                          <ul class="sub-task-list">
                            <li class="my-2">
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.4.1. Travel to photo site 2.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.4.2. Use camera A2 (macro) to photograph the
                                ground from 3 feet above the surface.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.4.3. Use camera A3 (wide) to photograph the
                                horizon 2 feet above the surface and directly
                                South.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" name="task2Site3" />
                              <span class="editableStep">
                                2.4.4. Use camera A6 (pan) to photograph 360
                                degrees, 4 feet above the surface.
                              </span>
                            </li>
                          </ul>
                        </li>
                        <li
                          class="my-2"
                          data-id="4"
                          data-item-sortable-id="4"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep"> 2.5. Photo Site 3 </span>
                          <ul class="sub-task-list">
                            <li class="my-2">
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.5.1. Travel to photo site 3.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.5.2. Use camera A2 (macro) to photograph the
                                ground from 3 feet above the surface.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.5.3. Use camera A3 (wide) to photograph the
                                horizon 2 feet above the surface and directly
                                West.
                              </span>
                            </li>
                            <li>
                              <input type="checkbox" />
                              <span class="editableStep">
                                2.5.4. Use camera A6 (pan) to photograph 360
                                degrees, 4 feet above the surface.
                              </span>
                            </li>
                          </ul>
                        </li>
                        <li
                          class="my-2"
                          data-id="5"
                          data-item-sortable-id="5"
                          draggable="true"
                          role="option"
                          aria-grabbed="false"
                        >
                          <input type="checkbox" />
                          <span class="editableStep">
                            2.6. Return camera A2 (macro), camera A3 (wide), and
                            camera A6 (pan) to the tool kit.
                          </span>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header" id="flush-headingThree">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#flush-collapseThree"
                      aria-expanded="false"
                      aria-controls="flush-collapseThree"
                    >
                      <div class="accordionLabel">
                        <div>
                          <h5>Task 3</h5>
                          <p
                            style="text-transform: uppercase; color: gray"
                            class="my-0"
                          >
                            Zone C
                          </p>
                          <div id="task3Timer" class="timerHeader">
                            <p class="my-0">
                              PET Timer:
                              <span class="task3TimerValues">00:00:00</span>
                            </p>
                          </div>
                        </div>
                        <span class="nestedTabTextStyle mx-2">
                          <i class="ph-timer mx-2"></i> 60 min
                        </span>
                      </div>
                    </button>
                  </h2>
                  <div
                    id="flush-collapseThree"
                    class="accordion-collapse collapse"
                    aria-labelledby="flush-headingThree"
                    data-bs-parent="#accordionFlushExample"
                  >
                    <div class="accordion-body">
                      <div class="timerButtonContainer">
                        <button
                          type="button"
                          class="btn btn-light startTask3Button"
                        >
                          Start
                        </button>
                        <button
                          type="button"
                          class="btn btn-success stopTask3Button"
                        >
                          End
                        </button>
                      </div>
                      Placeholder content for this accordion, which is intended
                      to demonstrate the <code>.accordion-flush</code> class.
                      This is the third item's accordion body. Nothing more
                      exciting happening here in terms of content, but just
                      filling up the space to make it look, at least at first
                      glance, a bit more representative of how this would look
                      in a real-world application.
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="tab-pane fade"
              id="nav-profile"
              role="tabpanel"
              aria-labelledby="nav-profile-tab"
            >
              Tools Content
            </div>
            <div
              class="tab-pane fade"
              id="nav-contact"
              role="tabpanel"
              aria-labelledby="nav-contact-tab"
            >
              Zone Info
            </div>
          </div>
        </div>
        <div class="consumables">
          <div class="consumableCard">
            <h5 id="timeRemaining">01:34:23</h5>
            <p>Time Remaining</p>
          </div>
          <div class="consumableCard">
            <h5 id="timeElapsed">01:12:54</h5>
            <p>Elapsed Time</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
      integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
      crossorigin=""
    ></script>
    <script src="https://unpkg.com/leaflet.marker.slideto@0.2.0/Leaflet.Marker.SlideTo.js"></script>
    <script src="js/Leaflet.GraphicScale.min.js"></script>
    <script src="js/leaflet.markercluster.js"></script>
    <script src="js/leaflet.markercluster.js.map"></script>
    <script src="js/popupMod.js" type="text/javascript"></script>
    <script src="js/draw-on-map.min.js"></script>
    <script src="js/L.Control.MousePosition.js"></script>
    <script src="js/leaflet.contextmenu.min.js"></script>
    <script src="js/L.Icon.Pulse.js"></script>
    <script
      src="https://kit.fontawesome.com/b41bf0afa7.js"
      crossorigin="anonymous"
    ></script>
    <script src="js/L.Icon.FontAwesome.js"></script>
    <script src="js/easytimer.min.js"></script>
    <script src="js/domEdit.js"></script>
    <script src="js/map_data.js"></script>

    <!-- Menu Toggle Script -->
    <script>
      // Running Time Remaining
      var countDownDate = new Date().getTime() + 3 * 60 * 60 * 1000;
      var timeClear = setInterval(function () {
        var now = new Date().getTime();
        var timeLeft = countDownDate - now;
        var hours = Math.floor(
          (timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        var minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor(
          (timeLeft % (1000 * 60)) / 1000
        ).toLocaleString("en-US", {
          minimumIntegerDigits: 2,
          useGrouping: false,
        });
        document.querySelector("#timeRemaining").innerHTML =
          hours + ":" + minutes + ":" + seconds;
        if (timeLeft < 0) {
          clearInterval(timeClear);
          document.querySelector("#timeRemaining").innerHTML = "00:00:00";
        }
      }, 1000);

      var timeElapsed = new easytimer.Timer();
      timeElapsed.start();

      timeElapsed.addEventListener("secondsUpdated", function (e) {
        $("#timeElapsed").html(timeElapsed.getTimeValues().toString());
      });

      timeElapsed.addEventListener("started", function (e) {
        $("#timeElapsed").html(timeElapsed.getTimeValues().toString());
      });

      // PET Timers
      var task1Timer = new easytimer.Timer();

      $(".startTask1Button").click(function () {
        task1Timer.start();
      });

      $(".stopTask1Button").click(function () {
        task1Timer.stop();
      });

      task1Timer.addEventListener("secondsUpdated", function (e) {
        $("#task1Timer .task1TimerValues").html(
          task1Timer.getTimeValues().toString()
        );
      });

      task1Timer.addEventListener("started", function (e) {
        $("#task1Timer .task1TimerValues").html(
          task1Timer.getTimeValues().toString()
        );
      });

      var task2Timer = new easytimer.Timer();

      $(".startTask2Button").click(function () {
        task2Timer.start();
      });

      $(".stopTask2Button").click(function () {
        task2Timer.stop();
      });

      task2Timer.addEventListener("secondsUpdated", function (e) {
        $("#task2Timer .task2TimerValues").html(
          task2Timer.getTimeValues().toString()
        );
      });

      task2Timer.addEventListener("started", function (e) {
        $("#task2Timer .task2TimerValues").html(
          task2Timer.getTimeValues().toString()
        );
      });

      var task3Timer = new easytimer.Timer();

      $(".startTask3Button").click(function () {
        task3Timer.start();
      });

      $(".stopTask3Button").click(function () {
        task3Timer.stop();
      });

      task3Timer.addEventListener("secondsUpdated", function (e) {
        $("#task3Timer .task3TimerValues").html(
          task3Timer.getTimeValues().toString()
        );
      });

      task3Timer.addEventListener("started", function (e) {
        $("#task3Timer .task3TimerValues").html(
          task3Timer.getTimeValues().toString()
        );
      });

      // Nav Bar Date Time
      var navBarTimer = new easytimer.Timer();
      navBarTimer.start({ precision: "seconds", startValues: { hours: 9 } });

      navBarTimer.addEventListener("secondsUpdated", function (e) {
        $("#navBarTimer").html(navBarTimer.getTimeValues().toString());
      });

      navBarTimer.addEventListener("started", function (e) {
        $("#navBarTimer").html(navBarTimer.getTimeValues().toString());
      });

      // Editable Steps

      // $(".editableStep").domEdit({
      //   editorClass: "editableStep",
      //   onSetEditorStyle: function ($editor, $editingElement) {
      //     $editor.css("color", "#fff");
      //     $editor.css("background-color", "#525252");
      //     $editor.css("border-style", "dotted");
      //     $editor.css("border-bottom-width", "1px");
      //     $editor.css("border-color", "#B1B1B1");
      //     $editor.css("width", "300px");
      //     $editor.css("height", "50px");
      //     $editor.css("outline", "none");
      //   },
      // });

      // Drag and Drop Steps
      // $(function () {
      //   $("#sortable").sortable();
      //   $("#sortable").disableSelection();
      // });

      // Map JS

      var mymap,
        evLocation = [-12.802112, -141.679669];

      var yellowCircleMarker = L.icon({
        iconUrl: "./assets/icons/YellowCircle.svg",
        iconSize: [32, 32],
        iconAnchor: [16, 16],
        popupAnchor: [0, -10],
      });

      var yellowSquareMarker = L.icon({
        iconUrl: "./assets/icons/YellowSquare.svg",
        iconSize: [32, 32],
        iconAnchor: [16, 16],
        popupAnchor: [0, -10],
      });

      var blueSquareMarker = L.icon({
        iconUrl: "./assets/icons/BlueSquareMarker.svg",
        iconSize: [32, 32],
        iconAnchor: [16, 16],
        popupAnchor: [0, -10],
      });

      function centerMap(e) {
        mymap.panTo(e.latlng);
      }

      function zoomIn(e) {
        mymap.zoomIn();
      }

      function zoomOut(e) {
        mymap.zoomOut();
      }

      function tagLocation(e) {
        var taggedLocation = L.marker(e.latlng, {
          icon: yellowSquareMarker,
        }).addTo(mymap);
        taggedLocation
          .bindPopup(
            "<p>[" +
              e.latlng.lng.toPrecision(7) +
              ", " +
              e.latlng.lat.toPrecision(7) +
              "]: </p>",
            { removable: true, editable: true }
          )
          .openPopup();
      }

      function tagPhoto(e) {
        var taggedPhoto = L.marker(e.latlng, {
          icon: blueSquareMarker,
        }).addTo(mymap);

        taggedPhoto
          .bindPopup(
            "<div> <img src='./assets/photo-tag-1.png' height='150' width='150' style='margin-bottom: 8px' /> <br/> [" +
              e.latlng.lng.toPrecision(7) +
              ", " +
              e.latlng.lat.toPrecision(7) +
              "]: </div>",
            { removable: true, editable: true }
          )
          .openPopup();
      }

      mymap = L.map("mapid", {
        minZoom: 3,
        maxZoom: 8,
        contextmenu: true,
        contextmenuWidth: 140,
        contextmenuItems: [
          {
            text: "Move EV Marker",
            icon: "assets/icons/navigation-arrow.png",
            callback: handleEVMarkerMove,
          },
          {
            text: "Tag Location",
            icon: "assets/icons/note.png",
            callback: tagLocation,
          },
          {
            text: "Tag Photo",
            icon: "assets/icons/photo.png",
            callback: tagPhoto,
          },
        ],
      }).setView(evLocation, 5);

      L.control.mousePosition({ lngFirst: true }).addTo(mymap);

      var pulsingIcon = L.icon.pulse({
        iconSize: [20, 20],
        color: "#F8E71C",
        fillColor: "#F8E71C",
      });
      var markerPulse = L.marker([-7.258252, -132.954745], {
        icon: pulsingIcon,
      }).addTo(mymap);

      markerPulse.bindTooltip("EV's Location", {
        offset: [5, 0],
        className: "tooltipClass",
      });

      // add leaflet-geoman controls with some options to the map
      mymap.pm.addControls({
        position: "topleft",
      });

      var marsLabeledMapLayer = L.tileLayer(
        // "https://mars.nasa.gov/mmgis-maps/M20/Layers/Jezero_Balanced_Visible_HiRISE_HRSCcolor_IHS_pansharp/{z}/{x}/{y}.png",
        "https://cartocdn-gusc.global.ssl.fastly.net/opmbuilder/api/v1/map/named/opm-mars-basemap-v0-2/all/{z}/{x}/{y}.png",
        {
          attribution:
            'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
          zoom: 3,
          tms: false,
        }
      )
        .addTo(mymap)
        .setZIndex(0);

      var marsShaded = L.tileLayer(
        "http://s3-eu-west-1.amazonaws.com/whereonmars.cartodb.net/celestia_mars-shaded-16k_global/{z}/{x}/{y}.png",
        {
          zoom: 3,
          tms: true,
        }
      );

      var marsMOLA = L.tileLayer(
        "http://s3-eu-west-1.amazonaws.com/whereonmars.cartodb.net/mola-color/{z}/{x}/{y}.png",
        {
          zoom: 3,
          tms: true,
        }
      );

      var marsVikingLayer = L.tileLayer(
        "http://s3-eu-west-1.amazonaws.com/whereonmars.cartodb.net/viking_mdim21_global/{z}/{x}/{y}.png",
        {
          zoom: 3,
          tms: true,
        }
      );

      var marsGrayscale = L.tileLayer(
        "http://s3-eu-west-1.amazonaws.com/whereonmars.cartodb.net/mola-gray/{z}/{x}/{y}.png",
        {
          zoom: 3,
          tms: true,
        }
      );

      var marsHillshade = L.tileLayer(
        "https://s3.us-east-2.amazonaws.com/opmmarstiles/hillshade-tiles/{z}/{x}/{y}.png",
        {
          zoom: 3,
          tms: true,
        }
      );

      var latlngs = [[-7.258252, -132.954745]];

      var polyline = L.polyline(latlngs, {
        color: "white",
        dashArray: 8,
        weight: 1,
      }).addTo(mymap);

      function onEachFeature(feature, layer) {
        // console.log({ feature, layer });
        var popupContent = "<p>[" + feature.geometry.coordinates + "]:</p>";

        if (feature.properties && feature.properties.popupContent) {
          popupContent += feature.properties.popupContent;
        }

        layer.bindPopup(popupContent, { removable: true, editable: true });
      }

      function onEachZoneFeature(feature, layer) {
        // console.log({ feature, layer });
        var popupContent =
          "<div style='display: flex; flex-direction: column; justify-content: space-around;'>" +
          "<h6 style='margin-bottom: 8px'>" +
          feature.properties.name +
          "</h6> <span>" +
          feature.properties.timing +
          "</span> <span style='color: #31b14d; margin-top: 4px; font-weight: 600'>ETA: " +
          feature.properties.eta +
          "</span></div>";

        layer.bindPopup(popupContent);
      }

      var goZoneStyle = {
        // fillColor: 'rgba(49, 177, 77, 1)',
        color: "rgba(49, 177, 77, 1)",
        weight: 5,
      };

      var goZoneLayer = L.geoJSON(
        { features: [GoZones] },
        {
          style: goZoneStyle,
          onEachFeature: onEachZoneFeature,
        }
      ).addTo(mymap);

      var noGoZoneStyle = {
        fillColor: "rgba(231, 24, 24, 0.8)",
        color: "rgba(231, 24, 24, 1)",
        weight: 2,
      };

      var noGoZoneLayer = L.markerClusterGroup();

      var noGoLayer = L.geoJSON(
        { features: [NoGoZones2] },
        {
          style: noGoZoneStyle,
        }
      ).addTo(mymap);

      // var markerLayers = L.markerClusterGroup({});

      // var markerLayer = L.geoJSON(
      //   { features: [markerLabels] },
      //   {
      //     onEachFeature: onEachFeature,
      //     pointToLayer: function (feature, latlng) {
      //       return markerLayers.addLayer(
      //         L.marker(latlng, {
      //           icon:
      //             feature.properties.type === "ev"
      //               ? yellowCircleMarker
      //               : yellowSquareMarker,
      //         })
      //       );
      //     },
      //   }
      // ).addTo(mymap);
      // controlLayers.addOverlay(markerLayer, "Markers");

      var plannedWaypointLineStyle = {
        color: "#333",
        dashArray: 6,
        weight: 2,
      };

      var plannedWaypoints = L.geoJSON(
        { features: [plannedWaypoints] },
        {
          style: plannedWaypointLineStyle,
        }
      ).addTo(mymap);

      var actualWaypointLineStyle = {
        color: "white",
        // dashArray: 4,
        weight: 3,
      };

      // var actualWaypoints = L.geoJSON(
      //   { features: [actualWaypoints] },
      //   {
      //     style: actualWaypointLineStyle,
      //   }
      // ).addTo(mymap);

      function handleEVMarkerMove(latlng) {
        markerPulse.slideTo(latlng, {
          duration: 7500,
          keepAtCenter: false,
        });
        polyline.addLatLng(latlng);
      }

      function onMapClick(e) {
        console.log(e.latlng.toString());
      }

      mymap.on("click", onMapClick);

      var graphicScale = L.control.graphicScale({ fill: "fill" }).addTo(mymap);

      var baseMaps = {
        "Label Map": marsLabeledMapLayer,
        "Shaded Map": marsShaded,
        "Color Coded MOLA Elevation Map": marsMOLA,
        "Viking Map": marsVikingLayer,
        "Greyscale Map": marsGrayscale,
        "Hillshade Map": marsHillshade,
      };

      var overlayMaps = {
        "Go Zones": goZoneLayer,
        "No Go Zones": noGoLayer,
        // Markers: markerLayers,
        "Actual Waypoints": polyline,
        "Planned Waypoints": plannedWaypoints,
      };

      L.control.layers(baseMaps, overlayMaps).addTo(mymap);

      mymap.pm.setGlobalOptions({
        enableDraw: {
          markerStyle: {
            icon: yellowSquareMarker,
          },
        },
      });

      mymap.on("pm:create", (e) => {
        e.marker
          .bindPopup(
            "<p>[" +
              e.marker._latlng.lng.toPrecision(7) +
              ", " +
              e.marker._latlng.lat.toPrecision(7) +
              "]: </p>",
            { removable: true, editable: true }
          )
          .openPopup();
      });

      window.addEventListener("beforeunload", function (ev) {
        return (ev.returnValue = "Are you sure you want to refresh this page?");
      });

      var ZoomViewer = L.Control.extend({
        onAdd: function () {
          var container = L.DomUtil.create("div");
          var gauge = L.DomUtil.create("div");
          container.style.width = "200px";
          container.style.background = "rgba(255,255,255,0.5)";
          container.style.textAlign = "left";
          mymap.on("zoomstart zoom zoomend", function (ev) {
            gauge.innerHTML = "Zoom level: " + mymap.getZoom();
          });
          container.appendChild(gauge);

          return container;
        },
      });

      new ZoomViewer().addTo(mymap);

      mymap.pm.setGlobalOptions({
        measurements: { measurement: true, displayFormat: "metric" },
      });

      // Task 2 New Waypoint
      var alternateWaypointMarker = L.marker([-8.101552, -114.149182], {
        icon: yellowSquareMarker,
      }).addTo(mymap);
      alternateWaypointMarker.bindPopup(
        "<div> <p>This site will add 18 minutes to your EVA.</p> <button class='btn btn-primary' type='button' onclick='addWaypointToPath()'>Accept</button></div>",
        {}
      );

      function addWaypointToPath() {
        handleEVMarkerMove([-8.101552, -114.149182]);
        $("#task2List").append(
          "<li data-id='6' data-item-sortable-id='6' draggable='true' role='option' aria-grabbed='false'> <input type='checkbox' id='task2FinishBox' onchange='handleTask2Finish(this)'/> <span class='editableStep'> 2.7. Report recon information through tagging.</span></li>"
        );
      }

      // Reacting to checkbox events
      var triggerSite1 = document.querySelector("input[name=triggerSite1]");
      var triggerSite2 = document.querySelector("input[name=triggerSite2]");
      var triggerSite3 = document.querySelector("input[name=triggerSite3]");
      var triggerZone2Arrival = document.querySelector(
        "input[name=task2Arrival]"
      );
      var triggerSite4 = document.querySelector("input[name=task2Site1]");
      var triggerSite5 = document.querySelector("input[name=task2Site2]");
      var triggerSite6 = document.querySelector("input[name=task2Site3]");
      var task2Finish = document.querySelector("#task2FinishBox");

      triggerSite1.addEventListener("change", function () {
        if (this.checked) {
          handleEVMarkerMove([-6.969741, -131.280414]);
        }
      });

      triggerSite2.addEventListener("change", function () {
        if (this.checked) {
          handleEVMarkerMove([-5.071647, -129.392036]);
        }
      });

      triggerSite3.addEventListener("change", function () {
        if (this.checked) {
          handleEVMarkerMove([-7.353125, -127.677869]);
        }
      });

      triggerZone2Arrival.addEventListener("change", function () {
        if (this.checked) {
          handleEVMarkerMove([-8.592472, -122.960228]);
        }
      });

      triggerSite4.addEventListener("change", function () {
        if (this.checked) {
          handleEVMarkerMove([-8.233568, -121.333947]);
        }
      });

      triggerSite5.addEventListener("change", function () {
        if (this.checked) {
          handleEVMarkerMove([-9.468947, -120.937325]);
        }
      });

      triggerSite6.addEventListener("change", function () {
        if (this.checked) {
          handleEVMarkerMove([-7.817305, -117.882552]);
        }
      });

      function handleTask2Finish(checkbox) {
        if (checkbox.checked) {
          handleEVMarkerMove([-11.71932, -122.178986]);

          var newNoGoZone = L.polygon(
            [
              [-12.92753, -124.927565],
              [-13.013246, -123.741041],
              [-14.188753, -123.543288],
              [-14.806152, -124.444166],
              [-14.465731, -125.542799],
              [-13.591042, -125.476881],
              [-12.92753, -124.927565],
            ],
            {
              fillColor: "rgba(231, 24, 24, 0.8)",
              color: "rgba(231, 24, 24, 1)",
              weight: 2,
            }
          );

          setTimeout(() => {
            newNoGoZone.addTo(mymap);
          }, 7000);
        }
      }

      // Geoman Event Handling
      // listen to vertexes being added to currently drawn layer (called workingLayer)
      // mymap.on("pm:drawstart", ({ workingLayer }) => {
      // workingLayer.on("pm:snap", (e) => {
      // console.log(e);
      // if (e.shape === "Marker") {
      // e.marker.bindPopup('<p>Hello world!<br />This is a nice popup.</p>').openPopup();

      // e.marker.bindPopup('<p>Hello world!<br />This is a nice popup.</p>', { removable: true, editable: true });

      // var popup = L.popup()
      // .setLatLng([ e.snapLatLng.lat,e.snapLatLng.lng])
      // .setContent('<p>Hello world!<br />This is a nice popup.</p>')
      // .openOn(mymap);

      // let feature = {
      //   id: (Math.random() * Math.floor(99999999)).toString(),
      //   properties: { type: "taggedLocation" },
      //   type: "Feature",
      //   geometry: {
      //     type: "Point",
      //     coordinates: [e.snapLatLng.lat,e.snapLatLng.lng],
      //   },
      // };

      // var popupContent = "<p>[" + feature.geometry.coordinates + "]:</p>";

      // if (feature.properties && feature.properties.popupContent) {
      //   popupContent += feature.properties.popupContent;
      // }

      // e.layer.bindPopup(popupContent, {
      //   removable: true,
      //   editable: true,
      // });
      //     }
      //   });
      // });
    </script>
  </body>
</html>
